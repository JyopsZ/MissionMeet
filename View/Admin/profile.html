<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Organization Profile</title>
  <link rel="stylesheet" href="admin_ComponentStyle.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
    <body>
        <nav class="navbar">
          <a href="#" class="navbar-logo">MissionMeet</a>
          <ul class="navbar-links">
              <li><a href="admin_dashboard.html">Admin Dashboard</a></li>
              <li><a href="profile.html">Organization Profile</a></li>
              <li><a href="manage_users.html">Manage Participants</a></li>
          </ul>
          <div class="navbar-cta">
              <a href="#" class="login-btn" onclick="logout()">Logout</a>
          </div>
      </nav>

    <header>
        <h1>Organization Profile</h1>
    </header>

        <div class="admin-container" id="orgProfile">

        <div class="org-infoLine">
          <p><strong>Name:</strong> &nbsp; <span id="org_name"></span></p>
        </div>
        
        <div class="org-infoLine">
          <p><strong>Description:</strong> &nbsp; <span id="org_description"></span></p>
        </div>
        
        <div class="org-infoLine">
          <p><strong>Email:</strong> &nbsp; <span id="org_email"></span></p>
        </div>
        
        <div class="org-infoLine">
          <p><strong>Contact:</strong> &nbsp; <span id="org_contact"></span></p>
        </div>

        <div class="org-infoLine">
          <p><strong>Address:</strong> &nbsp; <span id="org_address"></span></p>
        </div>

        <div class="org-infoLine">
          <p><strong>Subplan:</strong> &nbsp; <span id="org_subplan"></span></p>
        </div>

        <div class="org-infoLine">
          <p><strong>Logo:</strong> &nbsp; <span id="org_logo"></span></p>
        </div>
        <div id="currentLogoPreview"></div>
          
          <button onclick="location.href='manage_orgs.html'">Edit</button>
        </div>

    
        <footer>
            <p>&copy; 2025 Mission Meet. All rights reserved.</p>
        </footer>
        <script type="module">
            import { getAdminOrg } from '../../Controller/DB_CRUD.js';
          
            document.addEventListener('DOMContentLoaded', async function() {
              const userType = localStorage.getItem('userType');
              const userID = localStorage.getItem('userID');
          
              if (userType !== 'admin') {
                alert('Only admins can view organization profiles');
                window.location.href = '../Login Page.html';
                return;
              }
              const result = await getAdminOrg(userID);
              
              if (result.success) {

                document.getElementById('org_name').textContent = result.org.name;
                document.getElementById('org_description').textContent = result.org.description;
                document.getElementById('org_email').textContent = result.org.email;
                document.getElementById('org_contact').textContent = result.org.contact;
                document.getElementById('org_address').textContent = result.org.address;
                document.getElementById('org_subplan').textContent = result.org.subPlan;
                document.getElementById('org_logo').textContent = result.org.logo;
                
                const currentLogoPreview = document.getElementById('currentLogoPreview');
                        currentLogoPreview.innerHTML = `
                            <img src="../Images/${result.org.logo}" alt="Current Logo" style="max-width: 200px;">
                        `;

              } else {
                alert(result.message);
              }
            });
          </script>

          <script>
            function logout() {
              localStorage.removeItem('userType');
              localStorage.removeItem('userID');
              localStorage.removeItem('userName');
              localStorage.removeItem('userEmail');
              window.location.href = '../index.html';
            }
          </script>
    </body>
</html>
